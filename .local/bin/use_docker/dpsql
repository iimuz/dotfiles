#!/bin/bash
#
# コマンド実行例: dpsql -h localhost -p 5432 -U postgres -- --net=host
# '-' またｈ '--' の後に続いたコマンドは docker コマンドとして処理されます。

param_normal=""
param_docker=""
for OPT in "$@"
do
  case "$OPT" in
    "--" | "-")
      shift 1
      param_docker="$param_docker $@"
      break
      ;;
    *)
      param_normal="$param_normal $1"
      shift 1
      ;;
  esac
done

docker_run_with_mount_current_dir \
  $param_docker \
  postgres:12.2 \
  psql $param_normal
