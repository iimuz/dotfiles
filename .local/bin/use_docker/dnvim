#!/bin/bash
#
# コマンド実行例: dnvim README.md -- -p 127.0.0.1:8888:8888
# '-' またｈ '--' の後に続いたコマンドは docker コマンドとして処理されます。

param_normal=""
param_docker=""
for OPT in "$@"
do
  case "$OPT" in
    "--" | "-")
      shift 1
      param_docker="$param_docker $@"
      break
      ;;
    *)
      param_normal="$param_normal $1"
      shift 1
      ;;
  esac
done

gitignore=.config/git/ignore
gitignore_user=$HOME/$gitignore
param_gitignore=
if [ -f $gitignore_user ]; then
  param_gitignore="-v $gitignore_user:/home/dev/$gitignore"
fi

docker_run_with_mount_specific_dir \
  .git \
  $param_gitignore \
  $param_docker \
  iimuz/neovim:v0.4.3-full4 \
  nvim $param_normal

